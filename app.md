详细页面功能说明

这是一个专业的冥想应用，旨在帮助用户建立持续的冥想习惯，提供内心平静与专注力训练。以下是各个页面的详细功能说明：

📱 App 总体架构

设计风格：简约温馨、以蓝色系为主色调
导航方式：底部标签导航，5 个主要页面


🏠 首页 (HomeScreen)

页面定位

应用入口页面，提供快速启动冥想和概览用户数据的功能。

核心功能

1. 欢迎区域

温馨的欢迎标题："欢迎来到冥想世界"
副标题引导："让心灵找到宁静，让生活回归平衡"

2. 今日进展统计卡片

连续天数：显示用户连续冥想的天数
总时长：累计冥想时间（分钟）
冥想次数：总共完成的冥想会话数
快速跳转："查看更多" 链接到打卡页面

3. 快速开始区域 ⭐核心功能

提供三种不同时长的冥想选项：

快速放松：5 分钟，适合忙碌间隙
专注呼吸：10 分钟，提高注意力
深度冥想：20 分钟，深度身心放松

交互逻辑：点击任一选项直接跳转到冥想播放器界面，无需二次选择

4. 冥想指南

新手入门说明
冥想基础知识介绍
"了解更多" 按钮跳转到冥想页面

技术特点

响应式布局，三列网格布局
图标使用 Expo Vector Icons
卡片式设计增强视觉层次
安全区域适配


🧘 冥想页面 (MeditationScreen)

页面定位

应用的核心功能页面，提供完整的冥想体验。

核心功能

1. 双模式界面

冥想类型选择模式：

快速放松卡片（5 分钟专用）
多种冥想类型列表（呼吸冥想、正念冥想、放松冥想等）
每个卡片显示封面图、标题、描述、时长
冥想小贴士和益处介绍

冥想播放器模式：

大字体显示冥想名称和描述
实时计时器（MM:SS 格式）
控制按钮：开始 / 暂停 / 继续 / 结束
自动音频播放功能

2. 计时系统 ⭐核心功能

TimerDisplay 组件：精确到秒的计时
状态显示："冥想中..."/"准备开始"
实时更新：1 秒间隔更新显示
会话管理：记录开始时间和经过时长

3. 音频播放

自动加载冥想引导音频
播放 / 暂停控制
音频预加载机制
错误处理和降级方案

4. 会话管理

开始冥想时创建会话记录
暂停 / 恢复功能
结束时自动保存数据到数据库
完成提示显示总时长

5. 快速开始支持

接收来自首页的导航参数
自动创建快速冥想对象
直接进入播放器模式

技术特点

useState 管理组件状态
useEffect 处理路由参数
自定义头部导航
音频 API 集成
实时数据同步


✅ 打卡页面 (CheckinScreen)

页面定位

帮助用户跟踪冥想习惯，提供激励和成就感。

核心功能

1. 今日状态卡片

已完成状态：显示成功图标和鼓励文字
待冥想状态：提供 "立即冥想" 按钮
动态图标和颜色反馈

2. 详细统计展示

复用 HomeScreen 的统计组件
更详细的数据展示
图表化数据呈现

3. 连续打卡系统 ⭐核心功能

连续天数计算：显示当前连续冥想天数
激励文案：根据连续天数提供不同鼓励语
火焰图标：视觉化连续打卡概念

4. 日历视图 ⭐核心功能

月份导航：前后月份切换
周视图：显示星期标识
打卡标记：
绿色：已完成冥想的日期
灰色：未来日期
白色：过去未完成的日期
小勾标记：已打卡日期显示确认图标

5. 成就系统

三个递进式成就：

初心者：完成第一次冥想
坚持者：连续冥想 7 天
冥想达人：总共冥想 30 次
动态图标颜色和完成状态

6. 激励内容

每日冥想名言
精美卡片设计
积极正向的文案

技术特点

日历算法实现
状态联动显示
成就解锁逻辑
数据持久化


👥 好友页面 (FriendsScreen)

页面定位

社交功能页面，增强用户粘性和互动体验。

核心功能

1. 好友动态 Feed

时间轴设计：显示好友冥想活动
活动类型：冥想类型、时长、日期
时间标记：今天 / 昨天 / X 天前的智能显示
空状态处理：无动态时的友好提示

2. 好友列表管理

头像显示：用户名首字母生成
好友信息：用户名、统计数据（总时长、连续天数）
快速操作：聊天按钮（预留功能）
空状态：鼓励添加第一个好友

3. 添加好友功能

头部快速添加按钮
用户 ID 输入方式添加
好友请求发送系统
成功反馈提示

4. 社交激励

"一起冥想" 激励卡片
强调分享和互相鼓励
温馨的社交理念传达


👤 个人资料页面 (ProfileScreen)

页面定位

用户个人中心，展示成就和提供设置功能。

核心功能

1. 用户信息卡片

头像：用户名首字母圆形头像
基本信息：用户名、邮箱
编辑功能：快速编辑资料入口

2. 成就概览 ⭐核心功能

三维度统计：
冥想次数：总会话数
总时长：累计分钟数
连续天数：当前连续记录
网格布局：清晰展示数据

3. 成就徽章系统

冥想新手：完成第一次冥想（绿色）
专注达人：累计 100 分钟（蓝色）
坚持之星：连续 7 天（橙色）
动态状态：已获得 / 未获得的视觉区分
进度反馈：勾选标记已完成成就

4. 功能菜单

四个主要功能入口：

编辑资料：修改个人信息
分享应用：邀请好友功能
意见反馈：用户反馈收集
关于我们：应用信息展示

5. 版本信息

应用版本号显示
品牌标语展示
页面底部友好呈现

技术特点

模块化菜单设计
成就状态计算
用户数据整合
设置页面架构


🔧 开发说明

使用微信小程序云开发能力运行后端服务和数据库管理。


📊 数据管理

数据库表结构

users：用户基本信息和统计
- _id: 主键ID
- username: 用户名（唯一键）
- nickname: 用户昵称
- email: 邮箱
- password: 加密密码
- salt: 密码盐值
- avatar: 头像URL
- createTime: 创建时间
- updateTime: 更新时间
- lastLoginTime: 最后登录时间

meditation_records：冥想会话记录
friendships：好友关系管理
achievements：用户成就记录
backend_music:背景音乐

add_friend_records：好友邀请记录表
- _id: 主键ID
- applicant: 申请人username
- targetUser: 被申请人username
- applyTime: 申请时间
- status: 状态（pending/approved/rejected）
- acceptTime: 接受时间
- createTime: 创建时间
- updateTime: 更新时间

云函数API

sendFriendRequest：发送好友申请
- 入参：username（目标用户名）, currentUsername（当前用户名）
- 逻辑：检查用户是否存在，不能添加自己，创建邀请记录
- 返回：成功/失败状态和消息

状态管理

useMeditation：冥想相关状态和操作
useCheckin：打卡数据管理
useAudio：音频播放控制
SWR：数据缓存和同步

📋 账号体系说明

账号体系基于用户名（username）作为唯一标识：
- 移除了openid字段，不再依赖微信openid
- 使用username作为唯一键进行用户识别
- 支持用户名密码登录方式
- 会话管理基于username进行用户身份验证


🎨 设计特色

视觉风格

色彩方案：以蓝色系为主，温馨舒适
排版设计：清晰的层次结构
图标系统：Expo Vector Icons 统一风格
卡片设计：阴影和圆角提升现代感

用户体验

快速启动：一键开始冥想
进度反馈：实时统计和成就
社交元素：好友互动激励
习惯养成：打卡和连续记录

这个冥想 App 通过精心设计的页面结构和丰富的功能，为用户提供了完整的冥想体验，从快速开始到习惯养成，从个人修炼到社交分享，构建了一个全面的冥想生态系统。